#pragma once

#include "BBmacros.h"
#include "Position.h"

const PScore materialValues[5] = {
    S(91,193), S(394,586), S(401,625), S(546,1127), S(1213,1381)
};

const PScore pawnTable[64] = {
    S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     ,
    S(92,105)  , S(54,106)  , S(89,62)   , S(105,5)   , S(87,7)    , S(48,35)   , S(-116,120), S(-84,122) ,
    S(4,117)   , S(34,101)  , S(51,60)   , S(46,11)   , S(60,10)   , S(100,42)  , S(55,76)   , S(7,89)    ,
    S(3,65)    , S(4,52)    , S(10,32)   , S(24,3)    , S(33,11)   , S(31,24)   , S(-4,51)   , S(-5,49)   ,
    S(-4,36)   , S(-9,31)   , S(5,13)    , S(13,3)    , S(16,4)    , S(14,15)   , S(-6,23)   , S(-8,23)   ,
    S(-1,24)   , S(-3,18)   , S(1,19)    , S(9,14)    , S(17,23)   , S(3,25)    , S(8,10)    , S(1,10)    ,
    S(-4,34)   , S(-5,26)   , S(-6,34)   , S(-5,33)   , S(-7,42)   , S(15,41)   , S(17,21)   , S(-6,8)    ,
    S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     
};

const PScore knightTable[64] = {
    S(-149,-14), S(-68,71)  , S(-86,119) , S(28,87)   , S(70,80)   , S(-76,120) , S(-83,84)  , S(-108,-34),
    S(58,40)   , S(53,71)   , S(104,72)  , S(139,101) , S(122,104) , S(142,61)  , S(39,73)   , S(69,41)   ,
    S(41,61)   , S(74,85)   , S(90,124)  , S(94,125)  , S(123,117) , S(106,124) , S(74,91)   , S(50,69)   ,
    S(73,79)   , S(78,96)   , S(89,126)  , S(95,144)  , S(85,156)  , S(102,129) , S(69,127)  , S(78,95)   ,
    S(60,85)   , S(70,97)   , S(68,123)  , S(69,133)  , S(81,137)  , S(73,125)  , S(88,99)   , S(66,95)   ,
    S(34,41)   , S(45,72)   , S(45,96)   , S(54,119)  , S(55,117)  , S(44,89)   , S(44,75)   , S(36,49)   ,
    S(15,70)   , S(13,76)   , S(28,64)   , S(40,84)   , S(36,86)   , S(28,60)   , S(15,69)   , S(23,71)   ,
    S(-6,32)   , S(29,32)   , S(22,50)   , S(21,73)   , S(24,73)   , S(23,60)   , S(21,44)   , S(-8,21)   
};

const PScore bishopTable[64] = {
    S(2,123)  , S(-22,121), S(-69,124), S(-78,131), S(-59,124), S(-93,122), S(10,109) , S(-14,121),
    S(-1,114) , S(58,111) , S(56,105) , S(29,108) , S(48,104) , S(48,106) , S(25,118) , S(16,108) ,
    S(58,110) , S(67,112) , S(86,108) , S(65,104) , S(80,101) , S(78,120) , S(70,113) , S(50,119) ,
    S(48,108) , S(82,105) , S(64,107) , S(88,120) , S(92,122) , S(82,106) , S(84,108) , S(42,116) ,
    S(57,89)  , S(57,98)  , S(56,117) , S(76,115) , S(84,116) , S(54,111) , S(63,94)  , S(58,85)  ,
    S(57,87)  , S(69,95)  , S(61,106) , S(65,107) , S(58,107) , S(61,101) , S(63,87)  , S(64,90)  ,
    S(68,80)  , S(67,68)  , S(62,83)  , S(42,97)  , S(42,98)  , S(56,81)  , S(71,76)  , S(60,59)  ,
    S(75,75)  , S(58,90)  , S(42,92)  , S(33,86)  , S(29,92)  , S(39,96)  , S(49,90)  , S(65,72)  
};

const PScore rookTable[64] = {
    S(84,164) , S(74,171) , S(47,183) , S(56,175) , S(54,177) , S(82,174) , S(95,169) , S(102,163),
    S(54,162) , S(40,173) , S(65,169) , S(79,168) , S(67,172) , S(90,152) , S(55,165) , S(69,156) ,
    S(46,152) , S(100,133), S(78,149) , S(112,127), S(124,122), S(111,139), S(135,121), S(76,141) ,
    S(45,140) , S(67,137) , S(77,139) , S(103,127), S(91,132) , S(92,132) , S(90,133) , S(73,133) ,
    S(20,120) , S(27,137) , S(27,138) , S(38,129) , S(30,131) , S(31,136) , S(51,132) , S(35,116) ,
    S(14,97)  , S(33,113) , S(24,113) , S(36,105) , S(33,106) , S(32,110) , S(62,102) , S(33,86)  ,
    S(-13,98) , S(29,90)  , S(31,99)  , S(39,93)  , S(37,92)  , S(50,84)  , S(56,77)  , S(-7,92)  ,
    S(33,93)  , S(38,101) , S(42,103) , S(52,93)  , S(48,93)  , S(53,106) , S(54,93)  , S(43,75)  
};

const PScore queenTable[64] = {
    S(13,84)  , S(34,89)  , S(11,134) , S(12,140) , S(-4,168) , S(16,163) , S(18,123) , S(20,97)  ,
    S(30,76)  , S(-29,129), S(22,111) , S(-43,177), S(-52,218), S(17,175) , S(-50,168), S(34,99)  ,
    S(34,86)  , S(37,85)  , S(22,115) , S(26,126) , S(30,150) , S(31,170) , S(37,140) , S(29,155) ,
    S(46,75)  , S(46,115) , S(33,106) , S(16,166) , S(19,175) , S(48,161) , S(62,151) , S(61,118) ,
    S(49,34)  , S(47,81)  , S(36,97)  , S(33,143) , S(36,131) , S(44,118) , S(58,86)  , S(60,68)  ,
    S(52,13)  , S(61,38)  , S(52,76)  , S(49,72)  , S(50,63)  , S(54,78)  , S(69,42)  , S(67,9)   ,
    S(53,3)   , S(63,4)   , S(71,-8)  , S(66,28)  , S(67,20)  , S(83,-35) , S(77,-33) , S(54,-5)  ,
    S(57,-8)  , S(65,-13) , S(69,-12) , S(75,20)  , S(74,-13) , S(66,-34) , S(75,-37) , S(59,-31) 
};

const PScore kingTable[64] = {
    S(-24,-203), S(28,-68)  , S(59,-50)  , S(82,-26)  , S(85,-47)  , S(61,-34)  , S(55,-34)  , S(-15,-200),
    S(-64,-30) , S(69,52)   , S(116,32)  , S(167,-2)  , S(141,6)   , S(151,26)  , S(79,60)   , S(-6,-33)  ,
    S(-10,20)  , S(155,53)  , S(179,46)  , S(149,37)  , S(159,32)  , S(225,39)  , S(162,54)  , S(36,1)    ,
    S(-43,17)  , S(108,35)  , S(132,51)  , S(102,55)  , S(118,48)  , S(139,44)  , S(102,32)  , S(-54,3)   ,
    S(-58,-20) , S(60,16)   , S(110,34)  , S(60,59)   , S(79,49)   , S(87,28)   , S(67,6)    , S(-67,-23) ,
    S(-78,-6)  , S(-5,9)    , S(27,23)   , S(6,48)    , S(24,40)   , S(25,18)   , S(2,-2)    , S(-54,-21) ,
    S(-10,-20) , S(-27,6)   , S(-37,24)  , S(-90,38)  , S(-73,31)  , S(-60,28)  , S(-14,-5)  , S(-8,-44)  ,
    S(-26,-101), S(-8,-42)  , S(-49,-1)  , S(-115,-11), S(-75,-35) , S(-104,3)  , S(-12,-42) , S(-3,-132) 
};

const PScore knightMob[9] = {
    S(-24,-115), S(-5,-40), S(7,6), S(13,31), S(18,42), S(23,55), S(30,53), S(40,47), S(50,23)
};

const PScore bishopMob[14] = {
    S(-40,-182), S(-9,-105), S(8,-49), S(15,-21), S(25,0), S(31,19), S(34,31), S(33,39), S(32,50), S(37,51), S(45,45), S(68,29), S(77,34), S(98,-7)
};

const PScore rookMob[15] = {
    S(-16,-156), S(-20,-95), S(-10,-60), S(-11,-42), S(-10,-24), S(-12,-4), S(-9,4), S(-3,5), S(0,10), S(8,15), S(8,21), S(13,26), S(16,28), S(34,7), S(95,-26)
};

const PScore queenMob[28] = {
    S(-124,-454), S(-84,-480), S(-46,-373), S(-26,-282), S(-23,-185), S(-18,-129), S(-13,-95), S(-9,-78), S(-6,-59), S(-1,-48), S(3,-40), S(8,-37), S(12,-34), S(15,-33), S(17,-33), S(18,-33), S(16,-35), S(12,-31), S(14,-37), S(16,-45), S(29,-67), S(35,-84), S(34,-97), S(44,-116), S(30,-129), S(34,-150), S(8,-118), S(-16,-72)
};

extern const PScore* pestoTables[6];

constexpr Score gamephaseInc[12] = { 0, 1, 1, 2, 4, 0, 0, 1, 1, 2, 4, 0 };
extern PScore PSQTs[12][64];
/**
* @brief The initTables function initializes the material - positional tables
* @note This function is called once at the beginning of the program
*/
void initTables();

/**
 * @brief The pestoEval function evaluates the material and positional scores
 * @param pos The position to evaluate
 * @return The material and positional scores
 */
Score pestoEval(Position* pos);

/** 
 * @brief The initTropism function initializes the tropism tables
 * @note This is called at the start of the program 
 */
void initTropism();

/**
 * @brief The convertToFeatures function converts a set of positions to a set of features
 * @param filename The filename of the epd file
 * @param output The output file to write the features to
 */
void convertToFeatures(std::string filename, std::string output);