#pragma once

#include "BBmacros.h"
#include "Position.h"

const PScore materialValues[5] = {
    S(92,198), S(392,596), S(400,639), S(548,1154), S(1208,2134)
};

const PScore pawnTable[64] = {
    S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     ,
    S(87,103)  , S(48,105)  , S(85,60)   , S(104,5)   , S(89,6)    , S(49,33)   , S(-120,119), S(-82,118) ,
    S(0,111)   , S(30,97)   , S(47,56)   , S(44,9)    , S(58,9)    , S(97,40)   , S(49,75)   , S(8,88)    ,
    S(1,59)    , S(1,48)    , S(9,27)    , S(21,-1)   , S(31,9)    , S(29,21)   , S(-5,47)   , S(-5,45)   ,
    S(-7,29)   , S(-11,26)  , S(2,7)     , S(12,-3)   , S(14,-1)   , S(15,9)    , S(-6,17)   , S(-7,16)   ,
    S(-2,19)   , S(-5,13)   , S(-1,13)   , S(7,8)     , S(16,17)   , S(1,20)    , S(8,5)     , S(1,4)     ,
    S(-6,28)   , S(-7,21)   , S(-10,29)  , S(-7,30)   , S(-10,37)  , S(13,37)   , S(17,16)   , S(-8,2)    ,
    S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     
};

const PScore knightTable[64] = {
    S(-151,-23), S(-72,61)  , S(-82,104) , S(28,74)   , S(70,67)   , S(-74,107) , S(-81,73)  , S(-101,-48),
    S(52,31)   , S(48,60)   , S(94,61)   , S(135,88)  , S(118,94)  , S(138,49)  , S(29,61)   , S(67,31)   ,
    S(36,52)   , S(67,74)   , S(87,112)  , S(81,113)  , S(117,105) , S(101,116) , S(67,82)   , S(44,60)   ,
    S(68,71)   , S(72,87)   , S(81,115)  , S(87,135)  , S(79,145)  , S(96,120)  , S(63,116)  , S(72,84)   ,
    S(55,75)   , S(63,87)   , S(60,115)  , S(61,123)  , S(73,127)  , S(65,116)  , S(82,89)   , S(58,85)   ,
    S(24,31)   , S(37,64)   , S(38,87)   , S(45,113)  , S(47,108)  , S(35,82)   , S(37,65)   , S(27,41)   ,
    S(9,61)    , S(6,68)    , S(20,57)   , S(32,76)   , S(27,78)   , S(20,55)   , S(5,62)    , S(15,63)   ,
    S(-13,21)  , S(21,22)   , S(14,42)   , S(12,63)   , S(15,68)   , S(12,55)   , S(12,34)   , S(-18,13)  
};

const PScore bishopTable[64] = {
    S(-5,111) , S(-34,108), S(-76,111), S(-93,116), S(-72,110), S(-98,105), S(2,92)   , S(-20,106),
    S(-9,102) , S(48,100) , S(46,92)  , S(19,93)  , S(35,88)  , S(37,91)  , S(10,105) , S(5,95)   ,
    S(46,99)  , S(58,101) , S(76,94)  , S(55,88)  , S(70,84)  , S(67,103) , S(61,97)  , S(39,104) ,
    S(38,96)  , S(70,91)  , S(55,91)  , S(78,105) , S(82,106) , S(74,91)  , S(74,91)  , S(32,99)  ,
    S(47,76)  , S(46,82)  , S(45,104) , S(66,101) , S(73,100) , S(43,97)  , S(52,78)  , S(48,68)  ,
    S(48,70)  , S(60,81)  , S(50,94)  , S(52,95)  , S(47,95)  , S(49,91)  , S(51,74)  , S(54,77)  ,
    S(57,66)  , S(57,56)  , S(51,71)  , S(30,86)  , S(29,87)  , S(45,70)  , S(60,65)  , S(49,46)  ,
    S(64,62)  , S(47,76)  , S(31,80)  , S(22,74)  , S(18,83)  , S(27,86)  , S(38,76)  , S(55,58)  
};

const PScore rookTable[64] = {
    S(56,132), S(45,140), S(19,153), S(25,144), S(22,146), S(52,142), S(68,137), S(78,132),
    S(29,130), S(15,143), S(39,137), S(52,135), S(37,140), S(61,120), S(31,134), S(46,123),
    S(24,121), S(76,103), S(53,116), S(87,95) , S(98,88) , S(84,106), S(112,85), S(58,108),
    S(20,108), S(45,106), S(55,109), S(78,94) , S(67,99) , S(69,97) , S(70,100), S(51,101),
    S(-3,89) , S(3,106) , S(2,106) , S(15,97) , S(8,98)  , S(8,105) , S(29,100), S(13,85) ,
    S(-8,68) , S(8,83)  , S(-1,81) , S(13,72) , S(11,74) , S(9,78)  , S(43,72) , S(11,54) ,
    S(-35,67), S(6,61)  , S(8,68)  , S(17,63) , S(14,60) , S(28,52) , S(35,47) , S(-29,60),
    S(10,63) , S(16,70) , S(19,73) , S(29,61) , S(26,60) , S(30,76) , S(33,61) , S(21,42) 
};

const PScore queenTable[64] = {
    S(4,120)  , S(13,141) , S(-4,174) , S(-5,163) , S(-18,185), S(1,192)  , S(4,164)  , S(11,128) ,
    S(18,119) , S(-41,186), S(6,166)  , S(-59,222), S(-75,255), S(4,198)  , S(-59,221), S(26,141) ,
    S(22,131) , S(24,137) , S(8,166)  , S(9,178)  , S(11,193) , S(17,209) , S(23,178) , S(14,197) ,
    S(34,122) , S(32,158) , S(21,148) , S(2,210)  , S(4,217)  , S(37,202) , S(47,191) , S(48,158) ,
    S(37,84)  , S(35,127) , S(23,145) , S(23,188) , S(28,182) , S(31,166) , S(47,137) , S(47,109) ,
    S(41,62)  , S(48,88)  , S(39,125) , S(36,122) , S(39,111) , S(40,131) , S(57,97)  , S(55,57)  ,
    S(39,51)  , S(50,54)  , S(57,45)  , S(53,82)  , S(53,70)  , S(70,22)  , S(65,27)  , S(43,44)  ,
    S(41,40)  , S(52,39)  , S(55,41)  , S(62,74)  , S(60,36)  , S(52,20)  , S(61,14)  , S(46,16)  
};

const PScore kingTable[64] = {
    S(-15,-207), S(29,-73)  , S(53,-50)  , S(65,-27)  , S(72,-46)  , S(72,-40)  , S(80,-40)  , S(17,-203) ,
    S(-56,-33) , S(58,51)   , S(109,31)  , S(156,-6)  , S(127,5)   , S(153,22)  , S(79,57)   , S(21,-43)  ,
    S(-2,14)   , S(148,54)  , S(169,49)  , S(127,41)  , S(148,33)  , S(220,42)  , S(168,53)  , S(45,-5)   ,
    S(-49,14)  , S(95,39)   , S(118,53)  , S(77,57)   , S(94,52)   , S(130,49)  , S(96,35)   , S(-51,-3)  ,
    S(-60,-22) , S(53,18)   , S(93,38)   , S(43,61)   , S(66,52)   , S(75,34)   , S(62,8)    , S(-65,-24) ,
    S(-70,-10) , S(1,9)     , S(24,25)   , S(-3,48)   , S(16,39)   , S(18,18)   , S(8,-5)    , S(-48,-24) ,
    S(4,-23)   , S(-15,1)   , S(-27,19)  , S(-87,35)  , S(-65,28)  , S(-56,25)  , S(-5,-9)   , S(4,-46)   ,
    S(-12,-104), S(3,-45)   , S(-38,-5)  , S(-106,-16), S(-63,-40) , S(-97,0)   , S(2,-45)   , S(13,-133) 
};

const PScore knightMob[9] = {
    S(-24,-119), S(-5,-43), S(7,3), S(13,29), S(18,41), S(24,53), S(31,51), S(41,45), S(50,18)
};

const PScore bishopMob[14] = {
    S(-42,-183), S(-10,-105), S(7,-49), S(14,-22), S(24,1), S(29,19), S(33,30), S(30,37), S(32,46), S(36,49), S(44,38), S(68,24), S(77,27), S(106,-17)
};

const PScore rookMob[15] = {
    S(-15,-155), S(-20,-91), S(-11,-57), S(-11,-41), S(-10,-21), S(-12,0), S(-10,7), S(-4,8), S(-1,12), S(7,17), S(8,25), S(11,31), S(15,32), S(31,12), S(92,-19)
};

const PScore queenMob[28] = {
    S(-134,-396), S(-95,-421), S(-57,-327), S(-37,-239), S(-33,-140), S(-29,-86), S(-23,-54), S(-20,-37), S(-16,-17), S(-11,-4), S(-7,5), S(-2,8), S(2,10), S(6,13), S(8,14), S(6,15), S(5,16), S(1,21), S(3,19), S(3,12), S(16,-5), S(23,-21), S(23,-32), S(39,-53), S(27,-60), S(43,-85), S(18,-50), S(29,-43)
};

extern const PScore* pestoTables[6];

constexpr Score gamephaseInc[12] = { 0, 1, 1, 2, 4, 0, 0, 1, 1, 2, 4, 0 };
extern PScore PSQTs[12][64];
/**
* @brief The initTables function initializes the material - positional tables
* @note This function is called once at the beginning of the program
*/
void initTables();

/**
 * @brief The pestoEval function evaluates the material and positional scores
 * @param pos The position to evaluate
 * @return The material and positional scores
 */
Score pestoEval(Position* pos);

/** 
 * @brief The initTropism function initializes the tropism tables
 * @note This is called at the start of the program 
 */
void initTropism();

/**
 * @brief The convertToFeatures function converts a set of positions to a set of features
 * @param filename The filename of the epd file
 * @param output The output file to write the features to
 */
void convertToFeatures(std::string filename, std::string output);