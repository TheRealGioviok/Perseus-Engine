#pragma once

#include "BBmacros.h"
#include "Position.h"

const PScore materialValues[5] = {
    S(92,196), S(400,593), S(408,633), S(555,1144), S(1230,1377)
};

const PScore pawnTable[64] = {
    S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     ,
    S(91,104)  , S(55,105)  , S(89,61)   , S(104,4)   , S(87,5)    , S(48,34)   , S(-115,118), S(-85,121) ,
    S(3,115)   , S(33,99)   , S(50,57)   , S(45,9)    , S(59,8)    , S(99,40)   , S(54,75)   , S(7,87)    ,
    S(2,63)    , S(3,50)    , S(9,30)    , S(23,0)    , S(31,9)    , S(31,22)   , S(-5,48)   , S(-5,47)   ,
    S(-4,33)   , S(-10,28)  , S(4,10)    , S(12,1)    , S(15,2)    , S(12,13)   , S(-7,20)   , S(-8,20)   ,
    S(-2,22)   , S(-4,16)   , S(0,16)    , S(8,11)    , S(17,20)   , S(2,23)    , S(7,8)     , S(0,7)     ,
    S(-5,31)   , S(-5,24)   , S(-7,31)   , S(-5,31)   , S(-7,40)   , S(14,39)   , S(17,19)   , S(-6,6)    ,
    S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     
};

const PScore knightTable[64] = {
    S(-152,-17), S(-70,68)  , S(-90,116) , S(26,84)   , S(65,78)   , S(-76,117) , S(-84,81)  , S(-109,-37),
    S(55,38)   , S(50,69)   , S(103,68)  , S(130,99)  , S(114,102) , S(137,58)  , S(38,69)   , S(63,40)   ,
    S(37,59)   , S(71,81)   , S(83,120)  , S(93,120)  , S(120,112) , S(97,121)  , S(64,89)   , S(43,67)   ,
    S(69,77)   , S(74,93)   , S(85,123)  , S(82,143)  , S(81,152)  , S(87,129)  , S(68,123)  , S(70,94)   ,
    S(58,82)   , S(66,94)   , S(65,120)  , S(67,129)  , S(73,134)  , S(71,120)  , S(77,99)   , S(64,93)   ,
    S(31,39)   , S(43,69)   , S(43,91)   , S(52,115)  , S(53,113)  , S(42,86)   , S(42,72)   , S(34,46)   ,
    S(14,68)   , S(11,74)   , S(26,61)   , S(38,81)   , S(34,83)   , S(26,57)   , S(13,67)   , S(21,69)   ,
    S(-7,29)   , S(27,30)   , S(20,47)   , S(19,71)   , S(23,71)   , S(21,58)   , S(19,42)   , S(-9,19)   
};

const PScore bishopTable[64] = {
    S(-2,119) , S(-27,118), S(-73,120), S(-82,127), S(-66,121), S(-95,118), S(6,105)  , S(-16,118),
    S(-4,109) , S(55,106) , S(52,102) , S(25,103) , S(46,99)  , S(45,102) , S(24,113) , S(13,104) ,
    S(54,106) , S(64,108) , S(83,102) , S(63,100) , S(76,96)  , S(77,115) , S(63,108) , S(48,115) ,
    S(44,103) , S(79,100) , S(61,102) , S(83,116) , S(89,118) , S(76,101) , S(81,104) , S(36,111) ,
    S(52,85)  , S(54,94)  , S(52,113) , S(73,110) , S(80,110) , S(51,106) , S(59,90)  , S(55,81)  ,
    S(54,83)  , S(65,90)  , S(58,102) , S(61,102) , S(55,102) , S(58,96)  , S(60,82)  , S(60,85)  ,
    S(64,76)  , S(64,64)  , S(58,78)  , S(38,93)  , S(39,94)  , S(52,76)  , S(68,70)  , S(58,55)  ,
    S(71,71)  , S(54,86)  , S(38,87)  , S(30,82)  , S(26,88)  , S(36,91)  , S(46,86)  , S(62,67)  
};

const PScore rookTable[64] = {
    S(75,152) , S(65,160) , S(38,171) , S(47,163) , S(46,167) , S(74,162) , S(87,157) , S(93,152) ,
    S(47,150) , S(33,162) , S(58,157) , S(71,157) , S(58,161) , S(80,141) , S(45,154) , S(60,145) ,
    S(39,141) , S(92,121) , S(69,138) , S(102,116), S(115,111), S(98,128) , S(124,110), S(65,131) ,
    S(37,129) , S(60,126) , S(69,127) , S(94,115) , S(82,120) , S(84,120) , S(79,122) , S(64,121) ,
    S(13,109) , S(19,125) , S(19,126) , S(30,117) , S(23,119) , S(24,125) , S(41,120) , S(27,104) ,
    S(7,86)   , S(25,102) , S(16,101) , S(28,93)  , S(25,95)  , S(25,98)  , S(53,91)  , S(26,74)  ,
    S(-19,87) , S(22,79)  , S(24,88)  , S(32,82)  , S(30,81)  , S(42,72)  , S(47,66)  , S(-14,80) ,
    S(27,83)  , S(30,90)  , S(35,92)  , S(44,82)  , S(40,81)  , S(45,95)  , S(46,82)  , S(36,64)  
};

const PScore queenTable[64] = {
    S(3,83)   , S(25,86)  , S(1,131)  , S(4,137)  , S(-11,163), S(9,156)  , S(11,117) , S(12,94)  ,
    S(19,76)  , S(-41,127), S(10,108) , S(-56,172), S(-64,214), S(5,171)  , S(-61,166), S(23,99)  ,
    S(22,84)  , S(26,81)  , S(11,109) , S(13,121) , S(20,143) , S(18,162) , S(27,135) , S(17,150) ,
    S(35,73)  , S(35,113) , S(23,102) , S(6,163)  , S(8,171)  , S(36,156) , S(51,146) , S(51,114) ,
    S(39,34)  , S(36,82)  , S(24,99)  , S(22,143) , S(25,129) , S(33,117) , S(48,85)  , S(50,68)  ,
    S(41,15)  , S(50,41)  , S(41,78)  , S(37,72)  , S(39,63)  , S(43,79)  , S(58,43)  , S(56,10)  ,
    S(42,6)   , S(51,7)   , S(60,-7)  , S(55,31)  , S(55,23)  , S(71,-34) , S(66,-32) , S(43,-3)  ,
    S(45,-4)  , S(54,-10) , S(58,-9)  , S(64,22)  , S(63,-12) , S(55,-33) , S(64,-34) , S(48,-28) 
};

const PScore kingTable[64] = {
    S(-20,-204), S(33,-69)  , S(65,-51)  , S(90,-28)  , S(92,-48)  , S(69,-36)  , S(60,-35)  , S(-12,-201),
    S(-60,-31) , S(74,52)   , S(120,33)  , S(175,-3)  , S(146,6)   , S(157,26)  , S(83,61)   , S(-1,-34)  ,
    S(-4,19)   , S(159,53)  , S(185,46)  , S(155,37)  , S(164,32)  , S(231,39)  , S(168,53)  , S(40,1)    ,
    S(-40,17)  , S(114,34)  , S(139,51)  , S(109,54)  , S(126,47)  , S(144,44)  , S(108,31)  , S(-50,3)   ,
    S(-55,-19) , S(66,15)   , S(117,33)  , S(69,58)   , S(87,47)   , S(95,27)   , S(74,5)    , S(-64,-23) ,
    S(-76,-6)  , S(0,9)     , S(34,22)   , S(15,46)   , S(33,38)   , S(32,17)   , S(6,-2)    , S(-53,-21) ,
    S(-11,-20) , S(-25,6)   , S(-33,24)  , S(-87,38)  , S(-68,31)  , S(-57,29)  , S(-14,-5)  , S(-8,-44)  ,
    S(-29,-101), S(-10,-41) , S(-49,0)   , S(-114,-10), S(-75,-34) , S(-104,4)  , S(-13,-41) , S(-5,-131) 
};

const PScore knightMob[9] = {
    S(-27,-120), S(-8,-45), S(4,2), S(10,28), S(16,38), S(21,52), S(28,51), S(38,45), S(48,22)
};

const PScore bishopMob[14] = {
    S(-42,-183), S(-12,-106), S(6,-50), S(13,-22), S(23,-1), S(28,18), S(31,30), S(29,39), S(30,49), S(34,51), S(42,45), S(66,30), S(74,35), S(96,-6)
};

const PScore rookMob[15] = {
    S(-17,-158), S(-21,-99), S(-12,-62), S(-12,-44), S(-11,-27), S(-13,-6), S(-10,2), S(-5,3), S(-1,7), S(7,12), S(7,18), S(11,23), S(14,26), S(32,5), S(94,-28)
};

const PScore queenMob[28] = {
    S(-124,-460), S(-85,-482), S(-47,-375), S(-27,-284), S(-24,-187), S(-19,-131), S(-14,-98), S(-11,-80), S(-7,-60), S(-2,-49), S(2,-42), S(7,-39), S(10,-36), S(14,-34), S(16,-34), S(17,-35), S(16,-37), S(11,-33), S(14,-39), S(16,-48), S(28,-69), S(34,-86), S(34,-99), S(46,-121), S(25,-127), S(34,-153), S(7,-119), S(-16,-74)
};

extern const PScore* pestoTables[6];

constexpr Score gamephaseInc[12] = { 0, 1, 1, 2, 4, 0, 0, 1, 1, 2, 4, 0 };
extern PScore PSQTs[12][64];
/**
* @brief The initTables function initializes the material - positional tables
* @note This function is called once at the beginning of the program
*/
void initTables();

/**
 * @brief The pestoEval function evaluates the material and positional scores
 * @param pos The position to evaluate
 * @return The material and positional scores
 */
Score pestoEval(Position* pos);

/** 
 * @brief The initTropism function initializes the tropism tables
 * @note This is called at the start of the program 
 */
void initTropism();

/**
 * @brief The convertToFeatures function converts a set of positions to a set of features
 * @param filename The filename of the epd file
 * @param output The output file to write the features to
 */
void convertToFeatures(std::string filename, std::string output);