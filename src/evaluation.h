#pragma once

#include "BBmacros.h"
#include "Position.h"

const PScore materialValues[5] = {
    S(94,193), S(389,587), S(399,633), S(555,1150), S(1230,1249)
};

const PScore pawnTable[64] = {
    S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     ,
    S(88,114)  , S(53,110)  , S(87,61)   , S(111,3)   , S(89,-1)   , S(54,35)   , S(-105,117), S(-79,125) ,
    S(3,108)   , S(32,89)   , S(53,43)   , S(52,-10)  , S(68,-16)  , S(107,18)  , S(59,51)   , S(10,72)   ,
    S(1,59)    , S(0,42)    , S(11,19)   , S(24,-10)  , S(35,-5)   , S(34,3)    , S(2,33)    , S(-5,40)   ,
    S(-6,32)   , S(-11,24)  , S(4,2)     , S(12,-6)   , S(16,-8)   , S(15,2)    , S(-3,9)    , S(-8,14)   ,
    S(-2,20)   , S(-5,14)   , S(-2,12)   , S(7,7)     , S(16,16)   , S(1,18)    , S(7,3)     , S(0,6)     ,
    S(-8,29)   , S(-7,22)   , S(-9,27)   , S(-6,27)   , S(-10,37)  , S(12,36)   , S(15,16)   , S(-10,5)   ,
    S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     , S(0,0)     
};

const PScore knightTable[64] = {
    S(-154,-26), S(-74,58)  , S(-96,110) , S(9,77)    , S(47,70)   , S(-91,108) , S(-93,73)  , S(-111,-44),
    S(48,30)   , S(43,61)   , S(94,60)   , S(123,89)  , S(109,94)  , S(133,49)  , S(33,64)   , S(61,29)   ,
    S(34,48)   , S(71,75)   , S(78,111)  , S(77,108)  , S(111,101) , S(97,111)  , S(69,77)   , S(42,58)   ,
    S(65,65)   , S(71,84)   , S(83,110)  , S(85,129)  , S(76,140)  , S(95,117)  , S(66,107)  , S(74,79)   ,
    S(57,75)   , S(59,84)   , S(59,114)  , S(60,121)  , S(72,129)  , S(65,113)  , S(82,85)   , S(60,85)   ,
    S(25,33)   , S(36,65)   , S(37,86)   , S(45,110)  , S(48,110)  , S(36,83)   , S(37,64)   , S(27,38)   ,
    S(8,60)    , S(10,68)   , S(19,56)   , S(31,76)   , S(27,79)   , S(22,56)   , S(11,63)   , S(14,61)   ,
    S(-17,17)  , S(23,27)   , S(14,41)   , S(13,65)   , S(17,68)   , S(16,53)   , S(11,36)   , S(-16,9)   
};

const PScore bishopTable[64] = {
    S(-9,106)  , S(-34,108) , S(-79,110) , S(-93,120) , S(-76,115) , S(-106,112), S(1,95)    , S(-25,109) ,
    S(-8,97)   , S(47,95)   , S(43,92)   , S(15,97)   , S(35,89)   , S(34,93)   , S(11,103)  , S(5,97)    ,
    S(47,94)   , S(60,99)   , S(77,92)   , S(50,86)   , S(70,85)   , S(65,109)  , S(61,99)   , S(42,104)  ,
    S(36,92)   , S(73,88)   , S(53,93)   , S(75,101)  , S(80,102)  , S(67,89)   , S(73,91)   , S(32,100)  ,
    S(46,75)   , S(46,80)   , S(47,100)  , S(66,99)   , S(71,99)   , S(48,92)   , S(52,79)   , S(46,69)   ,
    S(47,71)   , S(56,81)   , S(51,90)   , S(55,91)   , S(48,89)   , S(50,86)   , S(51,72)   , S(55,75)   ,
    S(56,65)   , S(55,54)   , S(52,69)   , S(32,82)   , S(31,81)   , S(47,67)   , S(60,61)   , S(49,46)   ,
    S(65,61)   , S(47,74)   , S(32,78)   , S(22,69)   , S(18,75)   , S(28,80)   , S(36,72)   , S(55,57)   
};

const PScore rookTable[64] = {
    S(58,119), S(46,126), S(18,136), S(28,128), S(25,129), S(49,130), S(65,126), S(71,115),
    S(29,111), S(17,122), S(43,118), S(55,119), S(45,120), S(69,102), S(32,117), S(43,108),
    S(25,107), S(79,85) , S(58,102), S(90,79) , S(104,74), S(91,88) , S(112,73), S(57,94) ,
    S(23,98) , S(45,92) , S(57,95) , S(83,78) , S(67,85) , S(70,81) , S(68,85) , S(52,86) ,
    S(-3,76) , S(7,91)  , S(3,90)  , S(18,83) , S(7,82)  , S(8,86)  , S(27,85) , S(13,68) ,
    S(-10,52), S(10,66) , S(2,65)  , S(13,57) , S(10,60) , S(12,65) , S(41,52) , S(13,37) ,
    S(-34,50), S(7,46)  , S(9,53)  , S(19,48) , S(16,46) , S(28,38) , S(35,30) , S(-28,44),
    S(12,49) , S(15,55) , S(21,56) , S(29,48) , S(25,45) , S(32,58) , S(32,46) , S(20,29) 
};

const PScore queenTable[64] = {
    S(-11,61) , S(14,66)  , S(-6,106) , S(-7,109) , S(-16,136), S(3,130)  , S(0,93)   , S(0,69)   ,
    S(3,57)   , S(-55,112), S(-2,90)  , S(-68,148), S(-73,191), S(-3,145) , S(-75,148), S(10,77)  ,
    S(2,67)   , S(14,70)  , S(-4,97)  , S(3,105)  , S(13,125) , S(8,142)  , S(14,114) , S(4,131)  ,
    S(19,61)  , S(18,96)  , S(7,84)   , S(-6,142) , S(-5,149) , S(25,137) , S(34,123) , S(36,94)  ,
    S(21,23)  , S(19,69)  , S(10,84)  , S(6,129)  , S(11,116) , S(18,103) , S(33,71)  , S(35,56)  ,
    S(24,2)   , S(33,28)  , S(24,65)  , S(21,61)  , S(22,52)  , S(26,67)  , S(42,30)  , S(38,-6)  ,
    S(28,-6)  , S(34,-6)  , S(40,-18) , S(38,18)  , S(40,10)  , S(54,-42) , S(46,-43) , S(27,-15) ,
    S(31,-18) , S(38,-20) , S(40,-27) , S(47,7)   , S(46,-21) , S(37,-43) , S(46,-46) , S(30,-43) 
};

const PScore kingTable[64] = {
    S(-13,-218), S(41,-81)  , S(69,-63)  , S(99,-40)  , S(88,-55)  , S(79,-45)  , S(65,-41)  , S(-2,-216) ,
    S(-47,-47) , S(81,42)   , S(131,22)  , S(179,-8)  , S(152,1)   , S(155,21)  , S(77,57)   , S(9,-46)   ,
    S(10,9)    , S(158,47)  , S(184,49)  , S(153,39)  , S(169,36)  , S(217,47)  , S(161,54)  , S(45,-3)   ,
    S(-33,12)  , S(103,42)  , S(124,62)  , S(96,68)   , S(105,64)  , S(132,60)  , S(99,45)   , S(-43,7)   ,
    S(-49,-24) , S(59,24)   , S(99,47)   , S(53,74)   , S(71,67)   , S(75,48)   , S(62,20)   , S(-60,-18) ,
    S(-72,-7)  , S(-3,14)   , S(25,34)   , S(8,57)    , S(25,50)   , S(23,32)   , S(3,6)     , S(-52,-15) ,
    S(3,-30)   , S(-17,-2)  , S(-29,19)  , S(-81,33)  , S(-60,31)  , S(-49,23)  , S(-5,-13)  , S(5,-57)   ,
    S(-8,-116) , S(7,-56)   , S(-32,-14) , S(-97,-24) , S(-58,-50) , S(-88,-12) , S(5,-58)   , S(12,-148) 
};

const PScore knightMob[9] = {
    S(-23,-111), S(-4,-35), S(8,5), S(14,31), S(18,42), S(24,54), S(31,52), S(41,44), S(49,21)
};

const PScore bishopMob[14] = {
    S(-39,-178), S(-6,-100), S(10,-44), S(17,-18), S(27,2), S(31,22), S(34,34), S(33,43), S(32,53), S(36,57), S(47,51), S(66,36), S(70,43), S(95,6)
};

const PScore rookMob[15] = {
    S(-21,-141), S(-20,-81), S(-11,-49), S(-13,-29), S(-12,-15), S(-14,6), S(-11,16), S(-6,16), S(-1,22), S(6,27), S(6,33), S(10,38), S(13,40), S(32,20), S(91,-12)
};

const PScore queenMob[28] = {
    S(-130,-416), S(-88,-439), S(-51,-343), S(-32,-258), S(-28,-164), S(-21,-107), S(-17,-73), S(-14,-56), S(-10,-41), S(-5,-21), S(-2,-17), S(4,-12), S(6,-7), S(10,-10), S(13,-9), S(12,-9), S(12,-9), S(7,-4), S(11,-12), S(14,-17), S(27,-40), S(29,-60), S(28,-71), S(45,-98), S(30,-112), S(28,-121), S(21,-109), S(4,-68)
};

extern const PScore* pestoTables[6];

constexpr Score gamephaseInc[12] = { 0, 1, 1, 2, 4, 0, 0, 1, 1, 2, 4, 0 };
extern PScore PSQTs[12][64];
/**
* @brief The initTables function initializes the material - positional tables
* @note This function is called once at the beginning of the program
*/
void initTables();

/**
 * @brief The pestoEval function evaluates the material and positional scores
 * @param pos The position to evaluate
 * @return The material and positional scores
 */
Score pestoEval(Position* pos);

/** 
 * @brief The initTropism function initializes the tropism tables
 * @note This is called at the start of the program 
 */
void initTropism();

/**
 * @brief The convertToFeatures function converts a set of positions to a set of features
 * @param filename The filename of the epd file
 * @param output The output file to write the features to
 */
void convertToFeatures(std::string filename, std::string output);