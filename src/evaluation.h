#pragma once

#include "BBmacros.h"
#include "Position.h"

const PScore materialValues[5] = {
    S(80,158), S(366,530), S(359,544), S(423,864), S(1062,952)
};

const PScore pawnTable[64] = {
    S(0,0)    , S(0,0)    , S(0,0)    , S(0,0)    , S(0,0)    , S(0,0)    , S(0,0)    , S(0,0)    ,
    S(116,163), S(80,164) , S(114,121), S(128,64) , S(109,66) , S(74,93)  , S(-91,177), S(-59,180),
    S(14,151) , S(44,135) , S(61,93)  , S(56,45)  , S(69,44)  , S(108,77) , S(65,111) , S(17,124) ,
    S(14,99)  , S(15,86)  , S(21,66)  , S(35,36)  , S(43,45)  , S(42,57)  , S(7,84)   , S(6,84)   ,
    S(7,70)   , S(2,64)   , S(16,46)  , S(24,36)  , S(27,38)  , S(25,48)  , S(5,56)   , S(4,57)   ,
    S(10,59)  , S(8,52)   , S(12,53)  , S(20,47)  , S(29,56)  , S(14,59)  , S(19,45)  , S(13,44)  ,
    S(7,68)   , S(6,60)   , S(4,68)   , S(6,68)   , S(4,76)   , S(26,76)  , S(28,56)  , S(5,43)   ,
    S(0,0)    , S(0,0)    , S(0,0)    , S(0,0)    , S(0,0)    , S(0,0)    , S(0,0)    , S(0,0)    
};

const PScore knightTable[64] = {
    S(-118,41), S(-38,127), S(-55,175), S(57,145) , S(99,138) , S(-44,176), S(-53,140), S(-77,20) ,
    S(89,95)  , S(83,127) , S(135,128), S(169,158), S(152,162), S(173,118), S(70,128) , S(99,97)  ,
    S(72,116) , S(106,139), S(121,179), S(124,182), S(153,174), S(137,180), S(104,147), S(80,125) ,
    S(104,134), S(109,150), S(120,181), S(126,199), S(116,211), S(133,185), S(101,182), S(109,151),
    S(92,139) , S(102,151), S(99,177) , S(100,188), S(112,191), S(104,180), S(120,155), S(97,150) ,
    S(65,95)  , S(76,125) , S(77,148) , S(86,173) , S(87,171) , S(76,143) , S(76,130) , S(68,103) ,
    S(47,124) , S(45,129) , S(59,116) , S(72,137) , S(67,139) , S(60,114) , S(47,123) , S(54,125) ,
    S(26,85)  , S(61,85)  , S(54,103) , S(53,126) , S(56,127) , S(55,115) , S(53,97)  , S(25,74)  
};

const PScore bishopTable[64] = {
    S(48,202) , S(25,200) , S(-22,202), S(-31,209), S(-14,203), S(-46,200), S(56,187) , S(33,199) ,
    S(46,192) , S(104,190), S(103,184), S(75,186) , S(95,182) , S(95,185) , S(72,197) , S(61,187) ,
    S(104,189), S(113,191), S(132,186), S(112,182), S(126,179), S(124,198), S(117,191), S(95,197) ,
    S(94,186) , S(128,183), S(111,185), S(134,199), S(139,200), S(128,183), S(131,186), S(89,193) ,
    S(103,167), S(103,176), S(103,196), S(123,193), S(131,194), S(101,189), S(109,173), S(104,163),
    S(104,165), S(115,173), S(107,185), S(111,186), S(105,186), S(107,180), S(110,165), S(110,168),
    S(114,159), S(114,147), S(108,162), S(88,176) , S(88,178) , S(102,160), S(118,154), S(107,138),
    S(122,153), S(105,169), S(89,170) , S(80,165) , S(76,172) , S(86,175) , S(96,169) , S(112,150)
};

const PScore rookTable[64] = {
    S(216,416), S(206,423), S(179,435), S(188,427), S(187,430), S(213,426), S(227,421), S(234,415),
    S(186,414), S(172,426), S(197,421), S(210,421), S(198,425), S(222,405), S(186,417), S(200,408),
    S(179,404), S(232,385), S(210,401), S(243,379), S(257,374), S(242,392), S(268,372), S(208,394),
    S(177,392), S(200,389), S(210,391), S(235,379), S(223,384), S(224,384), S(222,385), S(205,385),
    S(152,372), S(159,389), S(159,390), S(170,381), S(162,383), S(163,389), S(183,383), S(167,369),
    S(146,348), S(165,365), S(156,364), S(168,357), S(165,359), S(164,363), S(194,354), S(165,337),
    S(120,349), S(162,341), S(163,351), S(172,345), S(170,344), S(181,336), S(189,329), S(126,343),
    S(167,344), S(171,352), S(175,354), S(184,345), S(180,344), S(186,358), S(187,344), S(176,326)
};

const PScore queenTable[64] = {
    S(169,236), S(195,234), S(166,286), S(169,296), S(148,330), S(170,321), S(175,275), S(169,265),
    S(188,218), S(129,270), S(179,257), S(112,328), S(101,373), S(170,327), S(104,319), S(191,244),
    S(193,224), S(196,223), S(180,259), S(181,275), S(186,300), S(184,322), S(188,292), S(182,311),
    S(206,210), S(206,253), S(192,247), S(175,305), S(175,321), S(203,306), S(219,296), S(217,265),
    S(209,172), S(207,218), S(195,231), S(192,277), S(195,268), S(202,255), S(218,222), S(218,211),
    S(210,151), S(221,172), S(213,207), S(209,202), S(211,195), S(214,209), S(229,174), S(226,146),
    S(213,138), S(223,137), S(231,124), S(227,158), S(227,151), S(244,93) , S(239,97) , S(214,129),
    S(216,126), S(225,119), S(230,120), S(236,149), S(235,119), S(226,98) , S(235,95) , S(220,100)
};

const PScore kingTable[64] = {
    S(-22,-200), S(26,-64)  , S(60,-48)  , S(78,-22)  , S(80,-43)  , S(61,-31)  , S(51,-29)  , S(-19,-195),
    S(-66,-27) , S(71,54)   , S(121,33)  , S(168,0)   , S(138,10)  , S(152,29)  , S(81,63)   , S(-4,-31)  ,
    S(-7,21)   , S(158,54)  , S(181,48)  , S(150,39)  , S(160,33)  , S(226,42)  , S(165,56)  , S(37,3)    ,
    S(-43,19)  , S(109,38)  , S(132,54)  , S(103,57)  , S(118,51)  , S(139,48)  , S(103,36)  , S(-52,5)   ,
    S(-54,-18) , S(61,19)   , S(109,37)  , S(61,61)   , S(79,52)   , S(86,32)   , S(67,10)   , S(-64,-22) ,
    S(-77,-4)  , S(-4,11)   , S(27,25)   , S(5,49)    , S(23,41)   , S(25,20)   , S(3,0)     , S(-53,-20) ,
    S(-9,-18)  , S(-25,8)   , S(-34,25)  , S(-88,39)  , S(-70,32)  , S(-58,29)  , S(-13,-4)  , S(-8,-41)  ,
    S(-26,-98) , S(-7,-38)  , S(-47,1)   , S(-112,-9) , S(-72,-33) , S(-103,5)  , S(-11,-39) , S(-2,-128) 
};

const PScore knightMob[9] = {
    S(-26,-114), S(-7,-39), S(6,6), S(12,32), S(17,43), S(22,56), S(29,55), S(39,49), S(49,26)
};

const PScore bishopMob[14] = {
    S(-43,-181), S(-11,-104), S(6,-49), S(14,-21), S(24,0), S(29,19), S(33,31), S(31,39), S(31,49), S(35,50), S(44,43), S(67,28), S(76,32), S(97,-9)
};

const PScore rookMob[15] = {
    S(-23,-145), S(-27,-84), S(-17,-51), S(-17,-33), S(-16,-16), S(-18,5), S(-15,13), S(-10,14), S(-6,19), S(2,24), S(1,30), S(7,35), S(9,37), S(27,17), S(87,-16)
};

const PScore queenMob[28] = {
    S(-134,-407), S(-91,-452), S(-51,-354), S(-32,-265), S(-28,-169), S(-24,-114), S(-18,-81), S(-15,-63), S(-11,-44), S(-7,-33), S(-3,-26), S(3,-22), S(6,-20), S(9,-18), S(11,-17), S(12,-16), S(10,-16), S(4,-12), S(7,-17), S(8,-24), S(21,-47), S(25,-62), S(23,-73), S(34,-92), S(19,-104), S(22,-123), S(-10,-83), S(-21,-49)
};

extern const PScore* pestoTables[6];

constexpr Score gamephaseInc[12] = { 0, 1, 1, 2, 4, 0, 0, 1, 1, 2, 4, 0 };
extern PScore PSQTs[12][64];
/**
* @brief The initTables function initializes the material - positional tables
* @note This function is called once at the beginning of the program
*/
void initTables();

/**
 * @brief The pestoEval function evaluates the material and positional scores
 * @param pos The position to evaluate
 * @return The material and positional scores
 */
Score pestoEval(Position* pos);

/** 
 * @brief The initTropism function initializes the tropism tables
 * @note This is called at the start of the program 
 */
void initTropism();

/**
 * @brief The convertToFeatures function converts a set of positions to a set of features
 * @param filename The filename of the epd file
 * @param output The output file to write the features to
 */
void convertToFeatures(std::string filename, std::string output);